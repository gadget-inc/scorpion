---
http_interactions:
- request:
    method: get
    uri: https://<KUBE_CLUSTER_ADDRESS>/apis/batch/v1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Thu, 21 Nov 2019 21:31:25 GMT
      Content-Length:
      - '361'
    body:
      encoding: ASCII-8BIT
      string: '{"kind":"APIResourceList","apiVersion":"v1","groupVersion":"batch/v1","resources":[{"name":"jobs","singularName":"","namespaced":true,"kind":"Job","verbs":["create","delete","deletecollection","get","list","patch","update","watch"],"categories":["all"]},{"name":"jobs/status","singularName":"","namespaced":true,"kind":"Job","verbs":["get","patch","update"]}]}

'
    http_version: 
  recorded_at: Thu, 21 Nov 2019 21:31:25 GMT
- request:
    method: post
    uri: https://<KUBE_CLUSTER_ADDRESS>/apis/batch/v1/namespaces/docker/jobs
    body:
      encoding: UTF-8
      string: '{"apiVersion":"batch/v1","kind":"Job","metadata":{"name":"zzjob-crawler--executecrawljob-80d4a57801","namespace":"docker","annotations":{"scheduling.k8s.io/group-name":"zzjob-crawler--executecrawljob-80d4a57801-group"}},"spec":{"completions":1,"parallelism":1,"backoffLimit":0,"ttlSecondsAfterFinished":259200,"template":{"metadata":{"name":"zzjob-crawler--executecrawljob-80d4a57801"},"spec":{"containers":[{"name":"execute-job","image":"hello-world","command":["bundle","exec","rake","job:run_inline","--","--job-class","Crawler::ExecuteCrawlJob","--args","[{\"property_id\":40,\"reason\":\"test\"}]"],"env":[{"name":"TEST_ENV_VAR","value":"FOO"}],"volumeMounts":[],"securityContext":{"capabilities":{"add":["SYS_PTRACE"]}}},{"name":"scorpion-crawler","image":"gcr.io/superpro-production/scorpion-crawler:latest","env":[{"name":"NODE_ENV","value":"production"},{"name":"PORT","value":"3005"}],"ports":[{"containerPort":3005}]}],"volumes":[],"restartPolicy":"Never","priorityClassName":"standard-job","schedulerName":"kube-batch"}}}}'
    headers:
      Accept:
      - application/json
      Content-Type:
      - application/json
  response:
    status:
      code: 201
      message: Created
    headers:
      Content-Type:
      - application/json
      Date:
      - Thu, 21 Nov 2019 21:31:25 GMT
      Content-Length:
      - '1893'
    body:
      encoding: ASCII-8BIT
      string: '{"kind":"Job","apiVersion":"batch/v1","metadata":{"name":"zzjob-crawler--executecrawljob-80d4a57801","namespace":"docker","selfLink":"/apis/batch/v1/namespaces/docker/jobs/zzjob-crawler--executecrawljob-80d4a57801","uid":"45955f07-0ca6-11ea-9f44-025000000001","resourceVersion":"598953","creationTimestamp":"2019-11-21T21:31:25Z","labels":{"controller-uid":"45955f07-0ca6-11ea-9f44-025000000001","job-name":"zzjob-crawler--executecrawljob-80d4a57801"},"annotations":{"scheduling.k8s.io/group-name":"zzjob-crawler--executecrawljob-80d4a57801-group"}},"spec":{"parallelism":1,"completions":1,"backoffLimit":0,"selector":{"matchLabels":{"controller-uid":"45955f07-0ca6-11ea-9f44-025000000001"}},"template":{"metadata":{"name":"zzjob-crawler--executecrawljob-80d4a57801","creationTimestamp":null,"labels":{"controller-uid":"45955f07-0ca6-11ea-9f44-025000000001","job-name":"zzjob-crawler--executecrawljob-80d4a57801"}},"spec":{"containers":[{"name":"execute-job","image":"hello-world","command":["bundle","exec","rake","job:run_inline","--","--job-class","Crawler::ExecuteCrawlJob","--args","[{\"property_id\":40,\"reason\":\"test\"}]"],"env":[{"name":"TEST_ENV_VAR","value":"FOO"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always","securityContext":{"capabilities":{"add":["SYS_PTRACE"]}}},{"name":"scorpion-crawler","image":"gcr.io/superpro-production/scorpion-crawler:latest","ports":[{"containerPort":3005,"protocol":"TCP"}],"env":[{"name":"NODE_ENV","value":"production"},{"name":"PORT","value":"3005"}],"resources":{},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","securityContext":{},"schedulerName":"kube-batch","priorityClassName":"standard-job"}}},"status":{}}

'
    http_version: 
  recorded_at: Thu, 21 Nov 2019 21:31:25 GMT
- request:
    method: get
    uri: https://<KUBE_CLUSTER_ADDRESS>/apis/scheduling.incubator.k8s.io/v1alpha1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/json
  response:
    status:
      code: 200
      message: OK
    headers:
      Content-Type:
      - application/json
      Date:
      - Thu, 21 Nov 2019 21:31:25 GMT
      Content-Length:
      - '513'
    body:
      encoding: ASCII-8BIT
      string: '{"kind":"APIResourceList","apiVersion":"v1","groupVersion":"scheduling.incubator.k8s.io/v1alpha1","resources":[{"name":"podgroups","singularName":"podgroup","namespaced":true,"kind":"PodGroup","verbs":["delete","deletecollection","get","list","patch","create","update","watch"],"storageVersionHash":"QwvDfHorYBo="},{"name":"queues","singularName":"queue","namespaced":<AUTHORIZATION>,"kind":"Queue","verbs":["delete","deletecollection","get","list","patch","create","update","watch"],"storageVersionHash":"n9QQ2izH0ac="}]}

'
    http_version: 
  recorded_at: Thu, 21 Nov 2019 21:31:25 GMT
- request:
    method: post
    uri: https://<KUBE_CLUSTER_ADDRESS>/apis/scheduling.incubator.k8s.io/v1alpha1/namespaces/docker/podgroups
    body:
      encoding: UTF-8
      string: '{"apiVersion":"scheduling.incubator.k8s.io/v1alpha1","kind":"PodGroup","metadata":{"name":"zzjob-crawler--executecrawljob-80d4a57801-group","namespace":"docker"},"spec":{"minMember":1}}'
    headers:
      Accept:
      - application/json
      Content-Type:
      - application/json
  response:
    status:
      code: 201
      message: Created
    headers:
      Content-Type:
      - application/json
      Date:
      - Thu, 21 Nov 2019 21:31:26 GMT
      Content-Length:
      - '448'
    body:
      encoding: ASCII-8BIT
      string: '{"apiVersion":"scheduling.incubator.k8s.io/v1alpha1","kind":"PodGroup","metadata":{"creationTimestamp":"2019-11-21T21:31:26Z","generation":1,"name":"zzjob-crawler--executecrawljob-80d4a57801-group","namespace":"docker","resourceVersion":"598955","selfLink":"/apis/scheduling.incubator.k8s.io/v1alpha1/namespaces/docker/podgroups/zzjob-crawler--executecrawljob-80d4a57801-group","uid":"459ad637-0ca6-11ea-9f44-025000000001"},"spec":{"minMember":1}}

'
    http_version: 
  recorded_at: Thu, 21 Nov 2019 21:31:25 GMT
recorded_with: VCR 5.0.0
